<!DOCTYPE html>
<html>
  <head>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js%22%3E"></script> 
    <link rel="stylesheet" href="styles.css" />
    <link rel="shortcut icon" type="image/x-icon" href="favicon.jpg">
    <title>Kare Puzzle Oyunu</title>
    <style>
      body {
			background-image: url('bac.jpg');
			background-repeat: no-repeat;
			background-size: cover;
		}
    .container {
        margin: auto;
      }
    </style>
  </head>
  <body>

    <form>
      <input type="file" id="imgFile" accept="image/*"style="margin-left: 600px;" />
    </form>
    <div class="container" id="previewContainer">
      <img id="imgPreview" src="#" alt="Görsel yüklenmedi" />
    </div>
    <div id="score">
        <p>Skor:0 </p>
    </div>

    <!-- İSİM EKLEME -->
    <div class="form-group">
      <p><b> Skor İçin İsim Girin:</b> </p>
    <form role="form">
        <input type="text" class="form-control" placeholder="İsim giriniz" name="name" style="padding: 8px;width: 200px;">
    </form>
    <button type="button" id="nameadd">Kaydet</button>
        </div>
        <div></div>
    <ul class="list-unstyled" id="todo"></ul>
    <!--  İSİM EKLEME BİTTİ-->

    <button id="startbtn" style="margin-left: 700px;" disabled>Başla</button>
    <button style="visibility: hidden" id="endbtn" >Bitir</button>
    <!--KARIŞTIR BUTONU START-->
    <button style="visibility:hidden" id="kar" >Karıştır</button>
    <!--KARIŞTIR BUTONU END-->
    <div style="visibility: hidden" class="row" id="imgGrid"></div>
    <script src="script.js"></script>
    
  </body>
  <script>
    const startbtn = document.getElementById("startbtn");
    const endbtn = document.getElementById("endbtn");
    const hiddenDiv = document.getElementById("imgGrid");
    const prv = document.getElementById("previewContainer");
    const imgFileRes = document.getElementById("imgFile");
    const imgPreviewCheck = document.getElementById("imgPreview");
    const kar=document.getElementById("kar");//
    const nameadd = document.getElementById("nameadd");// endbtn a bakarak ben ekledim

    imgFileRes.addEventListener("change", function () {
      if (imgPreviewCheck.src) {
        startbtn.disabled = false;
      } else {
        startbtn.disabled = true;
      }
    });

    imgPreviewCheck.addEventListener("load", function () {

      const cols = document.querySelectorAll(".col");
      cols.forEach(function (col) {
        col.remove();
      });

      if (imgPreviewCheck.src) {
        startbtn.disabled = false;
      } else {
        startbtn.disabled = true;
      }
    });

    imgPreviewCheck.addEventListener("error", function () {
      startbtn.disabled = true;
    });

    startbtn.addEventListener("click", function () {
      hiddenDiv.style.visibility = "visible";
      prv.style.visibility = "hidden";
      prv.style.position = "absolute";
      startbtn.style.visibility = "hidden";
      endbtn.style.visibility = "visible";
      imgFileRes.style.visibility ="hidden";
      kar.style.visibility="visible";// karıştır butonu
      nameadd.style.visibility="hidden";//isim ekleme kısmı
      
    });

    endbtn.addEventListener("click", function () {
      hiddenDiv.style.visibility = "hidden";
      prv.style.visibility = "visible";
      prv.style.position = "relative";
      startbtn.style.visibility = "visible";
      endbtn.style.visibility = "hidden";
      imgFileRes.style.visibility ="visible";
      kar.style.visibility="hidden";// karıştır butonu
      nameadd.style.visibility="visible";//isim ekleme kısmı
      const cols = document.querySelectorAll(".col");
      cols.forEach(function (col) {
        col.remove();
      });

      imgFileRes.value = "";
      document.getElementById("imgPreview").src = " ";
    });

    //////////////////////////
    
//     //Karıştır butonu
//     kar.addEventListener("click", function () {
//       hiddenDiv.style.visibility = "hidden";
//       prv.style.visibility = "visible";
//       prv.style.position = "relative";
//       startbtn.style.visibility = "visible";
//       kar.style.visibility = "hidden";// üstten kopyalandığı için burda da olmalı
//       nameadd.style.visibility="hidden";//isim ekleme kısmı
//       imgFileRes.style.visibility ="hidden";// visible idi
//       const cols = document.querySelectorAll(".col");
//       cols.forEach(function (col) {
//         col.remove();
//       });

//       // imgFileRes.value = "";
//       // document.getElementById("imgPreview").src = " ";
//     });
//     //İsim ekleme kısmı görünmesin diye
    nameadd.addEventListener("click", function () {
      hiddenDiv.style.visibility = "hidden";
      prv.style.visibility = "visible";
      prv.style.position = "relative";
      startbtn.style.visibility = "visible";
      kar.style.visibility = "hidden";//kopyalandığı için eklendi unutma
      nameadd.style.visibility="hidden";//isim ekleme kısmı
      imgFileRes.style.visibility ="hidden";//visible idi
      const cols = document.querySelectorAll(".col");
      cols.forEach(function (col) {
        col.remove();
      });

      // imgFileRes.value = "";
      // document.getElementById("imgPreview").src = " ";
    });


    //İsim ekleme kısmı
    $(document).ready(function () {
    $('button').click(function () {
        $('#todo').append("<ul>" + $("input[name=name]").val() + " <a href='#' class='close' aria-hidden='true'>&times;</a></ul>");
    });
    $("body").on('click', '#todo a', function () {
        $(this).closest("ul").remove();
    });
});
//isim ekleme bitti
  </script>
</html>
